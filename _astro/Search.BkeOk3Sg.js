import{o as Se,s as j,r as ne,i as d}from"./translation.CPsM6BQ6.js";import{i as Pe}from"./lifecycle.Bwpx8HfV.js";import{ah as se,ai as Te,f as oe,t as w,g as e,e as F,a as x,p as Le,b as ze,s as u,c as h,d as o,u as n,i as _,m as B,j as l,r as c,h as T,w as le}from"./render.Bj8FFFlJ.js";import{I as W,i as K,h as Z}from"./Icon.CgzQmn_8.js";import{e as Ee,i as Re}from"./each.CE7fl43D.js";import{b as ce}from"./input.B4jlEdZZ.js";import{I as v}from"./zh_TW.BgXONg39.js";import{u as de,a as D}from"./url-utils.BO0hhQIW.js";/* empty css                        */import"./branches.0Y2RxVQ-.js";/* empty css                        */function Be(p,M){if(!p||typeof p!="string"){console.warn("navigateToPage: Invalid URL provided");return}if(p.startsWith("http://")||p.startsWith("https://")||p.startsWith("//")){window.open(p,"_blank");return}if(p.startsWith("#")){const r=document.getElementById(p.slice(1));r&&r.scrollIntoView({behavior:"smooth"});return}if(typeof window<"u"&&window.swup)try{M?.replace||window.swup.navigate(p)}catch(r){console.error("Swup navigation failed:",r),ve(p)}else ve(p)}function ve(p,M){window.location.href=p}var We=_('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),Me=_('<div class="transition text-sm text-50" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-hover); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; shrink: 0;"> </span> <div><!></div></div>'),Ve=_('<div class="transition text-sm text-30" style="display: flex; align-items: flex-start; margin-top: 0.1rem"><span style="display: inline-block; background-color: var(--btn-plain-bg-active); color: var(--primary); padding: 0.1em 0.4em; border-radius: 5px; font-size: 0.75em; font-weight: 600; margin-right: 0.5em; shrink: 0;"> </span> <div><!></div></div>'),Ce=_(`<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block
           rounded-xl text-lg px-3 py-2 hover:bg-(--btn-plain-bg-hover) active:bg-(--btn-plain-bg-active)"><div class="transition text-90 inline-flex font-bold group-hover:text-(--primary)"><!> <!></div> <!> <!></a>`),Ne=_('<a class="transition first-of-type:mt-2 lg:first-of-type:mt-0 group block rounded-xl text-lg px-3 py-2 hover:bg-(--btn-plain-bg-hover) active:bg-(--btn-plain-bg-active) text-(--primary) font-bold text-center"><span class="inline-flex items-center"> <!></span></a>'),Ue=_("<!> <!>",1),je=_('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),Fe=_('<div class="transition first-of-type:mt-2 lg:first-of-type:mt-0 block rounded-xl text-lg px-3 py-2 text-50"> </div>'),Ke=_(`<div id="search-bar" class="hidden lg:flex transition-all items-center h-11 mr-2 rounded-lg
      bg-black/4 hover:bg-black/6 focus-within:bg-black/6
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
"><!> <input class="transition-all pl-10 text-sm bg-transparent outline-0
         h-full w-40 active:w-60 focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <button aria-label="Search Panel" id="search-switch" class="btn-plain scale-animation lg:hidden! rounded-lg w-11 h-11 active:scale-90"><!></button> <div id="search-panel" class="float-panel float-panel-closed search-panel absolute md:w-120
top-20 left-4 md:left-[unset] right-4 shadow-2xl rounded-2xl p-2 svelte-1n2o1uz"><div id="search-bar-inside" class="flex relative lg:hidden transition-all items-center h-11 rounded-xl
      bg-black/4 hover:bg-black/6 focus-within:bg-black/6
      dark:bg-white/5 dark:hover:bg-white/10 dark:focus-within:bg-white/10
  "><!> <input class="pl-10 absolute inset-0 text-sm bg-transparent outline-0
               focus:w-60 text-black/50 dark:text-white/50 svelte-1n2o1uz"/></div> <!></div>`,1);function et(p,M){ze(M,!1);let r=B(""),f=B(""),m=B([]),Y=B(!1),S=B(!1),$;const Ye=[{url:de("/"),meta:{title:"This Is a Fake Search Result"},excerpt:"Because Pagefind cannot work in the <mark>dev</mark> environment."},{url:de("/"),meta:{title:"If You Want to Test the Search"},excerpt:"Try running <mark>npm build && npm preview</mark> instead."}],pe=()=>{document.getElementById("search-panel")?.classList.toggle("float-panel-closed")},q=(t,a)=>{const s=document.getElementById("search-panel");!s||a&&!e(r)||!a&&!e(f)||(t?s.classList.remove("float-panel-closed"):s.classList.add("float-panel-closed"))},fe=()=>{document.getElementById("search-panel")?.classList.add("float-panel-closed"),u(r,""),u(f,""),u(m,[])},ee=(t,a)=>{t.preventDefault(),fe(),Be(a)},L=async(t,a)=>{if(!t){q(!1,a),u(m,[]);return}e(S)&&(u(Y,!0),clearTimeout($),$=setTimeout(async()=>{try{let s=[];if(window.pagefind){const g=await window.pagefind.search(t);s=await Promise.all(g.results.map(J=>J.data()))}u(m,s),q(!0,a)}catch(s){console.error("Search error:",s),u(m,[]),q(!1,a)}finally{u(Y,!1)}},300))};Se(()=>{const t=()=>{u(S,!0),e(r)&&L(e(r),!0),e(f)&&L(e(f),!1)};window.pagefind?t():(document.addEventListener("pagefindready",t,{once:!0}),document.addEventListener("pagefindloaderror",t,{once:!0}))}),se(()=>(e(S),e(r)),()=>{e(S)&&(e(r)||e(r)==="")&&L(e(r),!0)}),se(()=>(e(S),e(f)),()=>{e(S)&&(e(f)||e(f)==="")&&L(e(f),!1)}),Te(),Pe();var te=Ke(),A=oe(te),ae=l(A);W(ae,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var V=h(ae,2);ne(V),c(A);var C=h(A,2),me=l(C);W(me,{icon:"material-symbols:search",class:"text-[1.25rem]"}),c(C);var re=h(C,2),G=l(re),ie=l(G);W(ie,{icon:"material-symbols:search",class:"absolute text-[1.25rem] pointer-events-none ml-3 transition my-auto text-black/30 dark:text-white/30"});var H=h(ie,2);ne(H),c(G);var he=h(G,2);{var ue=t=>{var a=We(),s=l(a,!0);c(a),w(g=>T(s,g),[()=>(o(d),o(v),n(()=>d(v.searchLoading)))]),x(t,a)},ge=t=>{var a=Ue(),s=oe(a);Ee(s,1,()=>(e(m),n(()=>e(m).slice(0,5))),Re,(z,i)=>{var y=Ce(),P=l(y),N=l(P);Z(N,()=>(e(i),n(()=>e(i).meta.title)));var E=h(N,2);W(E,{icon:"fa7-solid:chevron-right",class:"transition text-[0.75rem] translate-x-1 my-auto text-(--primary)"}),c(P);var U=h(P,2);{var _e=b=>{var k=Me(),I=l(k),O=l(I,!0);c(I);var R=h(I,2),Q=l(R);Z(Q,()=>(e(i),n(()=>e(i).excerpt))),c(R),c(k),w(X=>T(O,X),[()=>(o(d),o(v),n(()=>d(v.searchSummary)))]),x(b,k)},ye=le(()=>(e(i),n(()=>e(i).excerpt.includes("<mark>"))));K(U,b=>{e(ye)&&b(_e)})}var we=h(U,2);{var ke=b=>{var k=Ve(),I=l(k),O=l(I,!0);c(I);var R=h(I,2),Q=l(R);Z(Q,()=>(e(i),n(()=>e(i).content))),c(R),c(k),w(X=>T(O,X),[()=>(o(d),o(v),n(()=>d(v.searchContent)))]),x(b,k)},Ie=le(()=>(e(i),n(()=>e(i).content&&e(i).content.includes("<mark>"))));K(we,b=>{e(Ie)&&b(ke)})}c(y),w(()=>j(y,"href",(e(i),n(()=>e(i).url)))),F("click",y,b=>ee(b,e(i).url)),x(z,y)});var g=h(s,2);{var J=z=>{var i=Ne(),y=l(i),P=l(y),N=h(P);W(N,{icon:"fa7-solid:arrow-right",class:"transition text-[0.75rem] ml-1"}),c(y),c(i),w((E,U)=>{j(i,"href",E),T(P,`${U??""} `)},[()=>(o(D),e(r),e(f),n(()=>D(e(r)||e(f)))),()=>(o(d),o(v),e(m),n(()=>d(v.searchViewMore).replace("{count}",(e(m).length-5).toString())))]),F("click",i,E=>ee(E,D(e(r)||e(f)))),x(z,i)};K(g,z=>{e(m),n(()=>e(m).length>5)&&z(J)})}x(t,a)},be=t=>{var a=je(),s=l(a,!0);c(a),w(g=>T(s,g),[()=>(o(d),o(v),n(()=>d(v.searchNoResults)))]),x(t,a)},xe=t=>{var a=Fe(),s=l(a,!0);c(a),w(g=>T(s,g),[()=>(o(d),o(v),n(()=>d(v.searchTypeSomething)))]),x(t,a)};K(he,t=>{e(Y)?t(ue):(e(m),n(()=>e(m).length>0)?t(ge,1):(e(m),n(()=>e(m).length===0)?t(be,2):(e(r)||e(f))&&t(xe,3)))})}c(re),w((t,a)=>{j(V,"placeholder",t),j(H,"placeholder",a)},[()=>(o(d),o(v),n(()=>d(v.search))),()=>(o(d),o(v),n(()=>d(v.search)))]),ce(V,()=>e(r),t=>u(r,t)),F("focus",V,()=>L(e(r),!0)),F("click",C,pe),ce(H,()=>e(f),t=>u(f,t)),x(p,te),Le()}export{et as default};
