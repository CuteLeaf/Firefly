import{p as y,o as W,s as C,i as D}from"./translation.CPsM6BQ6.js";import{i as X}from"./lifecycle.Bwpx8HfV.js";import{a as P,p as Z,b as $,s as tt,i as S,g as e,r as o,m as et,j as l,c as h,u as d,t as M,d as A,h as g}from"./render.Bj8FFFlJ.js";import{e as N,i as U}from"./each.CE7fl43D.js";import{I as k}from"./zh_TW.BgXONg39.js";import{g as B}from"./url-utils.BO0hhQIW.js";var at=S(`<a class="group btn-plain block! h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-(--primary)
                       outline outline-4 z-50
                       outline-(--card-bg)
                       group-hover:outline-(--btn-plain-bg-hover)
                       group-active:outline-(--btn-plain-bg-active)"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-(--primary)
                     text-75 pr-8 whitespace-nowrap text-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition
                     whitespace-nowrap text-ellipsis overflow-hidden text-30"> </div></div></a>`),rt=S(`<div><div class="flex flex-row w-full items-center h-15"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-(--primary) mx-auto
                  -outline-offset-2 z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>`),it=S('<div class="card-base px-8 py-6"></div>');function ut(F,m){$(m,!1);let f=y(m,"tags",28,()=>[]),p=y(m,"categories",28,()=>[]),K=y(m,"sortedPosts",24,()=>[]);const v=new URLSearchParams(window.location.search);f(v.has("tag")?v.getAll("tag"):[]),p(v.has("category")?v.getAll("category"):[]);const L=v.get("uncategorized");let j=et([]);function O(a){const r=(a.getMonth()+1).toString().padStart(2,"0"),n=a.getDate().toString().padStart(2,"0");return`${r}-${n}`}function R(a){return a.map(r=>`#${r}`).join(" ")}W(async()=>{let a=K();f().length>0&&(a=a.filter(t=>Array.isArray(t.data.tags)&&t.data.tags.some(i=>f().includes(i)))),p().length>0&&(a=a.filter(t=>t.data.category&&p().includes(t.data.category))),L&&(a=a.filter(t=>!t.data.category)),a=a.slice().sort((t,i)=>i.data.published.getTime()-t.data.published.getTime());const r=a.reduce((t,i)=>{const u=i.data.published.getFullYear();return t[u]||(t[u]=[]),t[u].push(i),t},{}),n=Object.keys(r).map(t=>({year:Number.parseInt(t,10),posts:r[Number.parseInt(t,10)]}));n.sort((t,i)=>i.year-t.year),tt(j,n)}),X();var x=it();N(x,5,()=>e(j),U,(a,r)=>{var n=rt(),t=l(n),i=l(t),u=l(i,!0);o(i);var z=h(i,4),Y=l(z);o(z),o(t);var q=h(t,2);N(q,1,()=>(e(r),d(()=>e(r).posts)),U,(w,s)=>{var c=at(),I=l(c),b=l(I),E=l(b,!0);o(b);var _=h(b,4),G=l(_,!0);o(_);var T=h(_,2),H=l(T,!0);o(T),o(I),o(c),M((J,Q,V)=>{C(c,"href",J),C(c,"aria-label",(e(s),d(()=>e(s).data.title))),g(E,Q),g(G,(e(s),d(()=>e(s).data.title))),g(H,V)},[()=>(A(B),e(s),d(()=>B(e(s).id))),()=>(e(s),d(()=>O(e(s).data.published))),()=>(e(s),d(()=>R(e(s).data.tags)))]),P(w,c)}),o(n),M(w=>{g(u,(e(r),d(()=>e(r).year))),g(Y,`${e(r),d(()=>e(r).posts.length)??""} ${w??""}`)},[()=>(A(D),e(r),A(k),d(()=>D(e(r).posts.length===1?k.postCount:k.postsCount)))]),P(a,n)}),o(x),P(F,x),Z()}export{ut as default};
