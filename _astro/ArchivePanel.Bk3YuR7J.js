import{p as k,o as V,i as W,a as C}from"./props.CPxiw4gU.js";import{f as I,a as A,p as X,b as Z,d as $,m as tt,i as e,r as l,e as d,g as h,l as n,t as D,k as S}from"./utils.Dqd-kqrZ.js";import{s as f}from"./render.DQLKMXFx.js";import{e as E,i as M}from"./each.B9g1NPX5.js";import{I as z}from"./zh_TW.CxePES7l.js";import{i as N}from"./translation.BxP-gFSp.js";import{g as U}from"./url-utils.Buok2KaB.js";import"./navBarConfig.Ct2GrT9o.js";var et=I(`<a class="group btn-plain !block h-10 w-full rounded-lg hover:text-[initial]"><div class="flex flex-row justify-start items-center h-full"><div class="w-[15%] md:w-[10%] transition text-sm text-right text-50"> </div> <div class="w-[15%] md:w-[10%] relative dash-line h-full flex items-center"><div class="transition-all mx-auto w-1 h-1 rounded group-hover:h-5
                       bg-[oklch(0.5_0.05_var(--hue))] group-hover:bg-[var(--primary)]
                       outline outline-4 z-50
                       outline-[var(--card-bg)]
                       group-hover:outline-[var(--btn-plain-bg-hover)]
                       group-active:outline-[var(--btn-plain-bg-active)]"></div></div> <div class="w-[70%] md:max-w-[65%] md:w-[65%] text-left font-bold
                     group-hover:translate-x-1 transition-all group-hover:text-[var(--primary)]
                     text-75 pr-8 whitespace-nowrap overflow-ellipsis overflow-hidden"> </div> <div class="hidden md:block md:w-[15%] text-left text-sm transition
                     whitespace-nowrap overflow-ellipsis overflow-hidden text-30"> </div></div></a>`),at=I(`<div><div class="flex flex-row w-full items-center h-[3.75rem]"><div class="w-[15%] md:w-[10%] transition text-2xl font-bold text-right text-75"> </div> <div class="w-[15%] md:w-[10%]"><div class="h-3 w-3 bg-none rounded-full outline outline-[var(--primary)] mx-auto
                  -outline-offset-[2px] z-50 outline-3"></div></div> <div class="w-[70%] md:w-[80%] transition text-left text-50"> </div></div> <!></div>`),rt=I('<div class="card-base px-8 py-6"></div>');function mt(B,g){Z(g,!1);let p=k(g,"tags",28,()=>[]),x=k(g,"categories",28,()=>[]),F=k(g,"sortedPosts",24,()=>[]),j=tt([]);function K(i){const r=(i.getMonth()+1).toString().padStart(2,"0"),a=i.getDate().toString().padStart(2,"0");return`${r}-${a}`}function O(i){return i.map(r=>`#${r}`).join(" ")}function w(){const i=new URLSearchParams(window.location.search);p(i.has("tag")?i.getAll("tag"):[]),x(i.has("category")?i.getAll("category"):[]);const r=i.get("uncategorized");let a=F();p().length>0&&(a=a.filter(t=>Array.isArray(t.data.tags)&&t.data.tags.some(s=>p().includes(s)))),x().length>0&&(a=a.filter(t=>t.data.category&&x().includes(t.data.category))),r&&(a=a.filter(t=>!t.data.category)),a=a.slice().sort((t,s)=>s.data.published.getTime()-t.data.published.getTime());const v=a.reduce((t,s)=>{const m=s.data.published.getFullYear();return t[m]||(t[m]=[]),t[m].push(s),t},{}),u=Object.keys(v).map(t=>({year:Number.parseInt(t,10),posts:v[Number.parseInt(t,10)]}));u.sort((t,s)=>s.year-t.year),$(j,u)}V(()=>(w(),document.addEventListener("firefly:page:loaded",w),()=>{document.removeEventListener("firefly:page:loaded",w)})),W();var b=rt();E(b,5,()=>e(j),M,(i,r)=>{var a=at(),v=d(a),u=d(v),t=d(u,!0);l(u);var s=h(u,4),m=d(s);l(s),l(v);var R=h(v,2);E(R,1,()=>(e(r),n(()=>e(r).posts)),M,(_,o)=>{var c=et(),L=d(c),y=d(L),Y=d(y,!0);l(y);var P=h(y,4),q=d(P,!0);l(P);var T=h(P,2),G=d(T,!0);l(T),l(L),l(c),D((H,J,Q)=>{C(c,"href",H),C(c,"aria-label",(e(o),n(()=>e(o).data.title))),f(Y,J),f(q,(e(o),n(()=>e(o).data.title))),f(G,Q)},[()=>(S(U),e(o),n(()=>U(e(o).id))),()=>(e(o),n(()=>K(e(o).data.published))),()=>(e(o),n(()=>O(e(o).data.tags)))]),A(_,c)}),l(a),D(_=>{f(t,(e(r),n(()=>e(r).year))),f(m,`${e(r),n(()=>e(r).posts.length)??""} ${_??""}`)},[()=>(S(N),e(r),S(z),n(()=>N(e(r).posts.length===1?z.postCount:z.postsCount)))]),A(i,a)}),l(b),A(B,b),X()}export{mt as default};
