function t(){const t=document.getElementById("post-list-container");if(!t)return;const i=window.innerWidth<1200,s=localStorage.getItem("postListLayout"),o=t.getAttribute("data-default-layout")||"list";let n=s||o;i&&(n="list"),e(n)}function e(t){const e=document.getElementById("post-list-container");if(!e)return;const o=e.classList.contains("grid-mode"),n=e.classList.contains("list-mode"),l=o?"grid":n?"list":null,d="true"===e.getAttribute("data-both-sidebars"),r="true"===e.getAttribute("data-masonry-enabled"),a=parseInt(e.getAttribute("data-grid-columns")||"2"),c=()=>{e.classList.remove("list-mode","grid-mode"),"grid"===t?(e.classList.add("grid-mode"),e.classList.remove("flex","flex-col"),r?(e.classList.remove("grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"),s()):(e.classList.add("grid","grid-cols-1","md:grid-cols-2","gap-4"),d||3!==a||e.classList.add("lg:grid-cols-3"),i())):(e.classList.add("list-mode"),e.classList.add("flex","flex-col","gap-4","md:gap-4"),e.classList.remove("grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3"),i())};l?l!==t?(e.classList.add("layout-switching"),setTimeout(()=>{c(),requestAnimationFrame(()=>{e.classList.remove("layout-switching")})},200)):"grid"===t&&r&&s():c()}function i(){const t=document.getElementById("post-list-container");if(!t)return;t.style.height="",t.style.position="",t.style.display="";t.querySelectorAll(".post-card-item").forEach(t=>{t.style.position="",t.style.top="",t.style.left="",t.style.width=""})}function s(){const t=document.getElementById("post-list-container");if(!t)return;if(!("true"===t.getAttribute("data-masonry-enabled")))return;if(!t.classList.contains("grid-mode"))return;const e=Array.from(t.querySelectorAll(".post-card-item"));if(0===e.length)return;const i="true"===t.getAttribute("data-both-sidebars"),s=parseInt(t.getAttribute("data-grid-columns")||"2");let o=2;!i&&3===s&&window.innerWidth>=1024&&(o=3),t.style.position="relative",t.style.display="block";const n=(t.offsetWidth-16*(o-1))/o,l=new Array(o).fill(0);e.forEach((t,e)=>{const i=e%o;t.style.position="absolute",t.style.width=`${n}px`,t.style.setProperty("height","auto","important");const s=t.offsetHeight,d=l[i],r=i*(n+16);t.style.top=`${d}px`,t.style.left=`${r}px`,l[i]+=s+16}),t.style.height=`${Math.max(...l)}px`}let o;document.addEventListener("DOMContentLoaded",function(){setTimeout(t,50);document.querySelectorAll("#post-list-container img").forEach(t=>{t.complete||t.addEventListener("load",()=>{s()})})}),document.addEventListener("visibilitychange",function(){document.hidden||setTimeout(t,100)}),window.addEventListener("layoutChange",function(t){const i=t.detail.layout;if(!document.getElementById("post-list-container"))return;e(window.innerWidth<1200?"list":i)}),window.addEventListener("resize",function(){clearTimeout(o),o=setTimeout(function(){t()},250)}),document.addEventListener("astro:page-load",function(){setTimeout(t,50);document.querySelectorAll("#post-list-container img").forEach(t=>{t.complete||t.addEventListener("load",()=>{s()})})}),document.addEventListener("astro:after-swap",function(){setTimeout(t,50)}),setTimeout(t,0);
